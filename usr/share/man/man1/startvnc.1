.\" Copyright 2025 Peter Tribble
.TH "STARTVNC" "1" "April 9, 2025" "Tribblix"
.SH NAME
startvnc - convenient management of VNC sessions
.SH SYNOPSIS
.nf
\fBstartvnc\fR [-z|-zone zone_name] [-help] [-session name]
       [-size t|s|m|l|xl] [-list] [-nc|-noclient] [-q|-query host]
       [-c|-connect session] [-Z bhyve_zone] [-view session] [-client]
.fi
.SH DESCRIPTION
The
.BR startvnc
utility simplifies launching and connecting to VNC sessions.
It combines the launching of a VNC server with
.BR vncserver (1),
the execution of the
.BR vncviewer (1)
client, and the management of what is run in the VNC session with
.BR setvncsession (1).
By default, a VNC server running a session is launched, along with a
VNC client to connect to it.
.SH OPTIONS
The following options are supported:
.sp
.ne 2
.na
\fB-help\fR
.ad
.RS 15n
Shows the usage message, and a list of available session names.
.RE

.sp
.ne 2
.na
\fB-session\fR \fIname\fR
.ad
.RS 15n
Specifies that VNC will be launched with the given session \fIname\fR,
as configured by the
.BR setvncsession (1)
utility.
Use of this option will set the default VNC session to the requested
name, in the same way that
.BR setvncsession (1)
does.
.RE

.sp
.ne 2
.na
\fB-size\fR \fIt\fR|\fIs\fR|\fIm\fR|\fIl\fR|\fIxl\fR
.ad
.RS 15n
Sets the size of the VNC desktop to be tiny, small, medium, large, or
extra large.
.RE

.sp
.ne 2
.na
\fB-nc|-noclient\fR
.ad
.RS 15n
Just runs the VNC server, with no client.
This option is useful when running a VNC session on a remote server.
The remote system should run the VNC server, with the client being run
on the user's desktop system.
.RE

.sp
.ne 2
.na
\fB-c|-connect\fR \fIsession\fR
.ad
.RS 15n
Runs a VNC client to connect to the existing \fIsession\fR.
.RE

.sp
.ne 2
.na
\fB-view\fR \fIsession\fR
.ad
.RS 15n
Runs a VNC client to connect to the existing \fIsession\fR in
view-only mode.
.RE

.sp
.ne 2
.na
\fB-client\fR
.ad
.RS 15n
Runs the
.BR vncviewer (1)
client.
.RE

.sp
.ne 2
.na
\fB-list\fR
.ad
.RS 15n
Shows a list of VNC sessions that are currently running.
.RE

.sp
.ne 2
.na
\fB-z|-zone\fR \fIzone_name\fR
.ad
.RS 15n
Manages VNC sessions on the local zone \fIzone_name\fR. It will
launch the session in the zone, and connect to a session running in
the zone (resolving the zone's name to an IP address, as normal
hostname resolution won't work in this case).
.RE

.sp
.ne 2
.na
\fB-Z\fR \fIzone_name\fR
.ad
.RS 15n
Connects to the VNC console for the bhyve zone \fIzone_name\fR. This
requires the current user to have been shared with the bhyve zone when
it was created using the \fB-U\fR option to \fBzap create-zone\fR. To
connect to a VNC session running inside the guest, use the \fB-z\fR
option.
.RE

.sp
.ne 2
.na
\fB-q|-query\fR \fIhost\fR
.ad
.RS 15n
Rather than launching a session itself, launches a VNC server that
queries a remote
.BR xdm (8)
server using XDMCP.
Can be used with the \fB-z\fR option to connect to an
.BR xdm (8)
server in a local zone, in which case the host is not required, but if
supplied must be the same as the zone name.
.RE

.SH SEE ALSO
.BR setvncsession (1),
.BR vncserver (1),
.BR vncviewer (1),
.BR zones (7),
.BR xdm (8)
